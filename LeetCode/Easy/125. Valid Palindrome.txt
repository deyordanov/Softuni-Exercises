public class Solution {
  public bool IsPalindrome(string s) {
    StringBuilder sb = new StringBuilder();
    foreach(char c in s) {
      if (Char.IsAsciiLetter(c) || Char.IsAsciiDigit(c)) {
        sb.Append(Char.ToLower(c));
      }
    }

    string full = sb.ToString().TrimEnd();

    int leftIndex = full.Length / 2;
    int rightIndex = full.Length / 2;
    while (leftIndex >= 0 &&
      rightIndex < full.Length &&
      full[leftIndex] == full[rightIndex]) {
      leftIndex--;
      rightIndex++;
    }

    if (leftIndex == -1 && rightIndex == full.Length) {
      return true;
    }

    leftIndex = full.Length / 2 - 1;
    rightIndex = full.Length / 2;
    while (leftIndex >= 0 &&
      rightIndex < full.Length &&
      full[leftIndex] == full[rightIndex]) {
      leftIndex--;
      rightIndex++;
    }

    if (leftIndex == -1 && rightIndex == full.Length) {
      return true;
    }

    return false;
  }
}